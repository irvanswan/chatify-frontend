{"ast":null,"code":"import _objectSpread from\"E:/portofolio/Project/chatify/chatify-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"E:/portofolio/Project/chatify/chatify-react/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from'axios';import React,{useState}from'react';import{useParams}from'react-router-dom';import{useSelector,useDispatch}from'react-redux';import{ChatList,NewMessage}from'../../../../../Redux/Actions/chatlist';import{GetMessage,SendMessage}from'../../../../../Redux/Actions/message';import{GetInfoUser}from'../../../../../Redux/Actions/user';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var _process$env=process.env,REACT_APP_API_URL=_process$env.REACT_APP_API_URL,REACT_APP_API_IMAGE_URL=_process$env.REACT_APP_API_IMAGE_URL;var Message=function Message(props){var formData=new FormData();var _useState=useState(false),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];var dispatch=useDispatch();var _useState3=useState({message:'',images:[]}),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),updated=_useState6[0],setUpdated=_useState6[1];var _useSelector=useSelector(function(state){return state.UserLogin;}),user=_useSelector.data;var _useSelector2=useSelector(function(state){return state.GetMessage;}),chat=_useSelector2.data;var _useSelector3=useSelector(function(state){return state.GetInfoUser;}),contact=_useSelector3.data;React.useEffect(function(){dispatch(GetMessage(user.data.token,props.chatroom,user.data.id_user));},[props,updated]);React.useEffect(function(){dispatch(GetInfoUser(user.data.token,props.chatroom,user.data.id_user));},[props,updated]);var newFormData=function newFormData(){formData.append('message',data.message);for(var i=0;i<data.images.length;i++){formData.append('images',data.images[i]);}};var onDragOver=function onDragOver(e){e.preventDefault();alert('kamu drag ini');};var handler=function handler(event){event.preventDefault();if(data.message!=null||data.images.length>0){newFormData();dispatch(SendMessage(user.data.token,props.chatroom,user.data.id_user,formData));setUpdated(!updated);setData({message:'',images:[]});}else{return false;}};return/*#__PURE__*/_jsxs(\"div\",{className:\"head-list bg-white\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"head-list bg-white\",children:contact&&contact.map(function(item){var _item$name;return/*#__PURE__*/_jsxs(\"div\",{className:\"row m-0\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-3 col-sm-3 col-md-2 col-lg-1 col-xl-1 mt-2 ms-2\",children:/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(REACT_APP_API_IMAGE_URL).concat(item.photo),className:\"photo\",alt:\"...\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"col-7 col-sm-7 col-md-8 col-lg-9 col-xl-10 mt-3\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"fw-bold\",children:(_item$name=item.name)!==null&&_item$name!==void 0?_item$name:item.username}),/*#__PURE__*/_jsx(\"br\",{}),item.isonline==true?/*#__PURE__*/_jsx(\"small\",{className:\"text-purple\",children:\"Online\"}):/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:\"Offline\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"col-auto col-sm-auto col-md-auto col-lg-auto col-xl-auto mt-4\",children:/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+'/images/i_profile_menu.svg',alt:\"...\"})})]});})}),/*#__PURE__*/_jsx(\"div\",{className:\"list-message bg-light d-block\",children:/*#__PURE__*/_jsx(\"div\",{className:\"list-group p-3\",children:chat&&chat.map(function(element){return element.user1==user.data.id_user?element.name_file!=null?element.message==null||element.message==''?/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-light d-flex flex-row flex-row-reverse\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(REACT_APP_API_IMAGE_URL).concat(element.photo),className:\"photo-message\"}),/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(REACT_APP_API_IMAGE_URL).concat(element.name_file),className:\"d-flex align-items-end message-left ms-2\"})]})}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-light d-flex flex-row flex-row-reverse\",id:element.id,onDrag:function onDrag(e){return onDragOver(e);},draggable:true,children:[/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(REACT_APP_API_IMAGE_URL).concat(element.photo),className:\"d-flex align-items-end photo-message ms-2\"}),/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(REACT_APP_API_IMAGE_URL).concat(element.name_file),className:\"d-flex align-items-end message-right ms-2\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-light d-flex flex-row flex-row-reverse\",id:element.id_detail,children:/*#__PURE__*/_jsx(\"p\",{className:\"p-3 mx-5 float-end bg-white message-right text-purple\",children:element.message})})]}):/*#__PURE__*/_jsxs(\"div\",{className:\"bg-light d-flex flex-row flex-row-reverse\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(REACT_APP_API_IMAGE_URL).concat(element.photo),className:\"d-flex align-items-end photo-message ms-2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"p-3 float-end bg-white message-right text-purple\",children:element.message})]}):element.name_file!=null?element.message!=null?/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-light d-flex flex-row\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(REACT_APP_API_IMAGE_URL).concat(element.photo),className:\"photo-message\"}),/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(REACT_APP_API_IMAGE_URL).concat(element.name_file),className:\"d-flex align-items-end message-left ms-2\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-light bg-light d-flex flex-row\",children:/*#__PURE__*/_jsx(\"p\",{className:\"p-3 mx-5 float-start bg-purple message-left text-white\",children:element.message})})]}):/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-light d-flex flex-row\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(REACT_APP_API_IMAGE_URL).concat(element.photo),className:\"photo-message\"}),/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(REACT_APP_API_IMAGE_URL).concat(element.name_file),className:\"d-flex align-items-end message-left ms-2\"})]})}):/*#__PURE__*/_jsxs(\"div\",{className:\"bg-light bg-light d-flex flex-row\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"\".concat(REACT_APP_API_IMAGE_URL).concat(element.photo),className:\"photo-message me-2\"}),/*#__PURE__*/_jsx(\"p\",{className:\"p-3 float-start bg-purple message-left text-white\",children:element.message})]});})})}),/*#__PURE__*/_jsx(\"div\",{className:\"footer-list bg-white d-block\",children:/*#__PURE__*/_jsx(\"div\",{className:\"position-relative input-group px-3\",children:/*#__PURE__*/_jsx(\"form\",{encType:\"multipart/form-data\",className:\"form-control search-box \",onSubmit:function onSubmit(e){return handler(e);},children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-group\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control search-box icon bg-light \",placeholder:\"Type your message...\",\"aria-label\":\"chat\",\"aria-describedby\":\"basic-addon1\",value:data.message,onChange:function onChange(e){return setData(_objectSpread(_objectSpread({},data),{},{message:e.target.value}));}}),/*#__PURE__*/_jsxs(\"label\",{className:\"search-box input-group-text bg-light\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",name:\"picture\",accept:\"image\",multiple:true,onChange:function onChange(e){return setData(_objectSpread(_objectSpread({},data),{},{images:e.target.files}));}}),/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+'/images/i_plus.svg',className:\"img-fluid\",alt:\"...\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"d-none d-sm-none d-md-block position-absolute col-lg-2 col-md-3 col-sm-4 col-8 g-2 bottom-0 end-0 pb-0 m-5 pe-5\",children:/*#__PURE__*/_jsx(\"div\",{className:\"d-none shadow-sm p-3 bg-purple menu-panel-right align-middle mt-5 me-5\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"list-group\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-start mb-1\",children:[/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+'/images/i_image.svg',alt:\"...\",width:\"13px\"}),/*#__PURE__*/_jsx(\"smal\",{className:\"text-white ms-2\",children:\"Image\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-start mb-1\",children:[/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+'/images/i_document.svg',alt:\"...\",width:\"13px\"}),/*#__PURE__*/_jsx(\"smal\",{className:\"text-white ms-2\",children:\"Document\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-start mb-1\",children:[/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+'/images/i_contact.svg',alt:\"...\",width:\"13px\"}),/*#__PURE__*/_jsx(\"smal\",{className:\"text-white ms-2\",children:\"Contact\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex justify-content-start mb-1\",children:[/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+'/images/i_location.svg',alt:\"...\",width:\"13px\"}),/*#__PURE__*/_jsx(\"smal\",{className:\"text-white ms-2\",children:\"Location\"})]})]})})}),/*#__PURE__*/_jsx(\"button\",{className:\"input-group-text search-box bg-light \",type:\"button\",children:/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+'/images/i_emoticon.svg',className:\"img-fluid\",alt:\"...\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"input-group-text search-box field bg-light \",type:\"button\",children:/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+'/images/i_camera.svg',className:\"img-fluid\",alt:\"...\"})})]})})})})]});};export default Message;","map":{"version":3,"sources":["E:/portofolio/Project/chatify/chatify-react/src/pages/Private/ChatLayout/Component/Message/message.js"],"names":["axios","React","useState","useParams","useSelector","useDispatch","ChatList","NewMessage","GetMessage","SendMessage","GetInfoUser","process","env","REACT_APP_API_URL","REACT_APP_API_IMAGE_URL","Message","props","formData","FormData","loading","setLoading","dispatch","message","images","data","setData","updated","setUpdated","state","UserLogin","user","chat","contact","useEffect","token","chatroom","id_user","newFormData","append","i","length","onDragOver","e","preventDefault","alert","handler","event","map","item","photo","name","username","isonline","PUBLIC_URL","element","user1","name_file","id","id_detail","target","value","files"],"mappings":"mUAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,KAAP,EAAcC,QAAd,KAA6B,OAA7B,CACA,OAASC,SAAT,KAA0B,kBAA1B,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,QAAT,CAAkBC,UAAlB,KAAoC,uCAApC,CACA,OAASC,UAAT,CAAqBC,WAArB,KAAwC,sCAAxC,CACA,OAASC,WAAT,KAA4B,mCAA5B,C,yGACqDC,OAAO,CAACC,G,CAAtDC,iB,cAAAA,iB,CAAmBC,uB,cAAAA,uB,CAE1B,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,KAAD,CAAU,CACtB,GAAIC,CAAAA,QAAQ,CAAG,GAAIC,CAAAA,QAAJ,EAAf,CADsB,cAEQhB,QAAQ,CAAC,KAAD,CAFhB,wCAEfiB,OAFe,eAENC,UAFM,eAGtB,GAAMC,CAAAA,QAAQ,CAAGhB,WAAW,EAA5B,CAHsB,eAIEH,QAAQ,CAAC,CAC7BoB,OAAO,CAAG,EADmB,CAE7BC,MAAM,CAAG,EAFoB,CAAD,CAJV,yCAIfC,IAJe,eAITC,OAJS,8BAQQvB,QAAQ,CAAC,KAAD,CARhB,yCAQfwB,OARe,eAQNC,UARM,gCASAvB,WAAW,CAAC,SAACwB,KAAD,QAAUA,CAAAA,KAAK,CAACC,SAAhB,EAAD,CATX,CASTC,IATS,cASdN,IATc,mBAUApB,WAAW,CAAC,SAACwB,KAAD,QAAWA,CAAAA,KAAK,CAACpB,UAAjB,EAAD,CAVX,CAUTuB,IAVS,eAUdP,IAVc,mBAWGpB,WAAW,CAAC,SAACwB,KAAD,QAAWA,CAAAA,KAAK,CAAClB,WAAjB,EAAD,CAXd,CAWTsB,OAXS,eAWdR,IAXc,CAatBvB,KAAK,CAACgC,SAAN,CAAgB,UAAI,CAChBZ,QAAQ,CAACb,UAAU,CAACsB,IAAI,CAACN,IAAL,CAAUU,KAAX,CAAiBlB,KAAK,CAACmB,QAAvB,CAAgCL,IAAI,CAACN,IAAL,CAAUY,OAA1C,CAAX,CAAR,CACH,CAFD,CAEE,CAACpB,KAAD,CAAOU,OAAP,CAFF,EAIAzB,KAAK,CAACgC,SAAN,CAAgB,UAAI,CAChBZ,QAAQ,CAACX,WAAW,CAACoB,IAAI,CAACN,IAAL,CAAUU,KAAX,CAAiBlB,KAAK,CAACmB,QAAvB,CAAgCL,IAAI,CAACN,IAAL,CAAUY,OAA1C,CAAZ,CAAR,CACH,CAFD,CAEE,CAACpB,KAAD,CAAOU,OAAP,CAFF,EAIA,GAAMW,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAK,CACrBpB,QAAQ,CAACqB,MAAT,CAAgB,SAAhB,CAA0Bd,IAAI,CAACF,OAA/B,EACA,IAAI,GAAIiB,CAAAA,CAAC,CAAC,CAAV,CAAaA,CAAC,CAAGf,IAAI,CAACD,MAAL,CAAYiB,MAA7B,CAAqCD,CAAC,EAAtC,CAAyC,CACrCtB,QAAQ,CAACqB,MAAT,CAAgB,QAAhB,CAAyBd,IAAI,CAACD,MAAL,CAAYgB,CAAZ,CAAzB,EACH,CACJ,CALD,CAMA,GAAME,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,CAAD,CAAK,CACpBA,CAAC,CAACC,cAAF,GACAC,KAAK,CAAC,eAAD,CAAL,CACH,CAHD,CAIA,GAAMC,CAAAA,OAAO,CAAG,QAAVA,CAAAA,OAAU,CAACC,KAAD,CAAW,CACvBA,KAAK,CAACH,cAAN,GACA,GAAGnB,IAAI,CAACF,OAAL,EAAgB,IAAhB,EAAwBE,IAAI,CAACD,MAAL,CAAYiB,MAAZ,CAAqB,CAAhD,CAAkD,CAC9CH,WAAW,GACXhB,QAAQ,CAACZ,WAAW,CAACqB,IAAI,CAACN,IAAL,CAAUU,KAAX,CAAiBlB,KAAK,CAACmB,QAAvB,CAAgCL,IAAI,CAACN,IAAL,CAAUY,OAA1C,CAAkDnB,QAAlD,CAAZ,CAAR,CACAU,UAAU,CAAC,CAACD,OAAF,CAAV,CACAD,OAAO,CAAC,CAACH,OAAO,CAAG,EAAX,CAAcC,MAAM,CAAG,EAAvB,CAAD,CAAP,CACH,CALD,IAKK,CACD,MAAO,MAAP,CACH,CACJ,CAVD,CAWA,mBACI,aAAK,SAAS,CAAC,oBAAf,wBACI,YAAK,SAAS,CAAC,oBAAf,UACKS,OAAO,EACJA,OAAO,CAACe,GAAR,CAAY,SAACC,IAAD,oCACZ,aAAK,SAAS,CAAC,SAAf,wBACA,YAAK,SAAS,CAAC,qDAAf,uBACI,YAAK,GAAG,WAAKlC,uBAAL,SAA+BkC,IAAI,CAACC,KAApC,CAAR,CAAqD,SAAS,CAAC,OAA/D,CAAuE,GAAG,CAAC,KAA3E,EADJ,EADA,cAIA,aAAK,SAAS,CAAC,iDAAf,wBACI,aAAM,SAAS,CAAC,SAAhB,sBAA2BD,IAAI,CAACE,IAAhC,yCAAwCF,IAAI,CAACG,QAA7C,EADJ,cACiE,aADjE,CAEMH,IAAI,CAACI,QAAL,EAAiB,IAAlB,cAAwB,cAAO,SAAS,CAAC,aAAjB,oBAAxB,cAAsE,cAAO,SAAS,CAAC,YAAjB,qBAF3E,GAJA,cAQA,YAAK,SAAS,CAAC,+DAAf,uBACI,YAAK,GAAG,CAAEzC,OAAO,CAACC,GAAR,CAAYyC,UAAZ,CAAyB,4BAAnC,CAAkE,GAAG,CAAC,KAAtE,EADJ,EARA,GADY,EAAZ,CAFR,EADJ,cAkBI,YAAK,SAAS,CAAC,+BAAf,uBACI,YAAK,SAAS,CAAC,gBAAf,UACKtB,IAAI,EACDA,IAAI,CAACgB,GAAL,CAAS,SAACO,OAAD,QACRA,CAAAA,OAAO,CAACC,KAAR,EAAiBzB,IAAI,CAACN,IAAL,CAAUY,OAA5B,CACKkB,OAAO,CAACE,SAAR,EAAqB,IAAtB,CACKF,OAAO,CAAChC,OAAR,EAAmB,IAAnB,EAA2BgC,OAAO,CAAChC,OAAR,EAAmB,EAA/C,cACI,kCACI,aAAK,SAAS,CAAC,2CAAf,wBACI,YAAK,GAAG,WAAKR,uBAAL,SAA+BwC,OAAO,CAACL,KAAvC,CAAR,CAAwD,SAAS,CAAC,eAAlE,EADJ,cAEI,YAAK,GAAG,WAAKnC,uBAAL,SAA+BwC,OAAO,CAACE,SAAvC,CAAR,CAA4D,SAAS,CAAC,0CAAtE,EAFJ,GADJ,EADJ,cAQI,oCACI,aAAK,SAAS,CAAC,2CAAf,CAA2D,EAAE,CAAEF,OAAO,CAACG,EAAvE,CAA2E,MAAM,CAAE,gBAACf,CAAD,QAAKD,CAAAA,UAAU,CAACC,CAAD,CAAf,EAAnF,CAAuG,SAAS,KAAhH,wBACI,YAAK,GAAG,WAAK5B,uBAAL,SAA+BwC,OAAO,CAACL,KAAvC,CAAR,CAAwD,SAAS,CAAC,2CAAlE,EADJ,cAEI,YAAK,GAAG,WAAKnC,uBAAL,SAA+BwC,OAAO,CAACE,SAAvC,CAAR,CAA4D,SAAS,CAAC,2CAAtE,EAFJ,GADJ,cAKI,YAAK,SAAS,CAAC,2CAAf,CAA2D,EAAE,CAAEF,OAAO,CAACI,SAAvE,uBACI,UAAG,SAAS,CAAC,uDAAb,UAAsEJ,OAAO,CAAChC,OAA9E,EADJ,EALJ,GATR,cAmBA,aAAK,SAAS,CAAC,2CAAf,wBACI,YAAK,GAAG,WAAKR,uBAAL,SAA+BwC,OAAO,CAACL,KAAvC,CAAR,CAAwD,SAAS,CAAC,2CAAlE,EADJ,cAEI,UAAG,SAAS,CAAC,kDAAb,UAAiEK,OAAO,CAAChC,OAAzE,EAFJ,GApBJ,CAyBKgC,OAAO,CAACE,SAAR,EAAqB,IAAtB,CACKF,OAAO,CAAChC,OAAR,EAAmB,IAApB,cACI,oCACI,aAAK,SAAS,CAAC,0BAAf,wBACI,YAAK,GAAG,WAAKR,uBAAL,SAA+BwC,OAAO,CAACL,KAAvC,CAAR,CAAwD,SAAS,CAAC,eAAlE,EADJ,cAEI,YAAK,GAAG,WAAKnC,uBAAL,SAA+BwC,OAAO,CAACE,SAAvC,CAAR,CAA4D,SAAS,CAAC,0CAAtE,EAFJ,GADJ,cAKI,YAAK,SAAS,CAAC,mCAAf,uBACI,UAAG,SAAS,CAAC,wDAAb,UAAuEF,OAAO,CAAChC,OAA/E,EADJ,EALJ,GADJ,cAWI,kCACI,aAAK,SAAS,CAAC,0BAAf,wBACI,YAAK,GAAG,WAAKR,uBAAL,SAA+BwC,OAAO,CAACL,KAAvC,CAAR,CAAwD,SAAS,CAAC,eAAlE,EADJ,cAEI,YAAK,GAAG,WAAKnC,uBAAL,SAA+BwC,OAAO,CAACE,SAAvC,CAAR,CAA4D,SAAS,CAAC,0CAAtE,EAFJ,GADJ,EAZR,cAmBA,aAAK,SAAS,CAAC,mCAAf,wBACI,YAAK,GAAG,WAAK1C,uBAAL,SAA+BwC,OAAO,CAACL,KAAvC,CAAR,CAAwD,SAAS,CAAC,oBAAlE,EADJ,cAEI,UAAG,SAAS,CAAC,mDAAb,UAAkEK,OAAO,CAAChC,OAA1E,EAFJ,GA7CK,EAAT,CAFR,EADJ,EAlBJ,cAyEI,YAAK,SAAS,CAAC,8BAAf,uBACI,YAAK,SAAS,CAAC,oCAAf,uBACA,aAAM,OAAO,CAAC,qBAAd,CAAoC,SAAS,CAAC,0BAA9C,CAAyE,QAAQ,CAAE,kBAACoB,CAAD,QAAKG,CAAAA,OAAO,CAACH,CAAD,CAAZ,EAAnF,uBACA,aAAK,SAAS,CAAC,aAAf,wBACA,cAAO,IAAI,CAAC,MAAZ,CAAmB,SAAS,CAAC,wCAA7B,CAAsE,WAAW,CAAC,sBAAlF,CAAyG,aAAW,MAApH,CAA2H,mBAAiB,cAA5I,CAA2J,KAAK,CAAElB,IAAI,CAACF,OAAvK,CAAgL,QAAQ,CAAE,kBAACoB,CAAD,QAAOjB,CAAAA,OAAO,gCAAKD,IAAL,MAAWF,OAAO,CAACoB,CAAC,CAACiB,MAAF,CAASC,KAA5B,GAAd,EAA1L,EADA,cAEI,eAAO,SAAS,CAAC,sCAAjB,wBACI,cAAO,IAAI,CAAC,MAAZ,CAAmB,IAAI,CAAC,SAAxB,CAAkC,MAAM,CAAC,OAAzC,CAAiD,QAAQ,KAAzD,CAA0D,QAAQ,CAAE,kBAAClB,CAAD,QAAOjB,CAAAA,OAAO,gCAAKD,IAAL,MAAWD,MAAM,CAACmB,CAAC,CAACiB,MAAF,CAASE,KAA3B,GAAd,EAApE,EADJ,cAEI,YAAK,GAAG,CAAElD,OAAO,CAACC,GAAR,CAAYyC,UAAZ,CAAyB,oBAAnC,CAA0D,SAAS,CAAC,WAApE,CAAgF,GAAG,CAAC,KAApF,EAFJ,GAFJ,cAMI,YAAK,SAAS,CAAC,iHAAf,uBACI,YAAK,SAAS,CAAC,wEAAf,uBACI,aAAK,SAAS,CAAC,YAAf,wBACI,aAAK,SAAS,CAAC,mCAAf,wBACI,YAAK,GAAG,CAAE1C,OAAO,CAACC,GAAR,CAAYyC,UAAZ,CAAyB,qBAAnC,CAA2D,GAAG,CAAC,KAA/D,CAAqE,KAAK,CAAC,MAA3E,EADJ,cAEI,aAAM,SAAS,CAAC,iBAAhB,mBAFJ,GADJ,cAKI,aAAK,SAAS,CAAC,mCAAf,wBACI,YAAK,GAAG,CAAE1C,OAAO,CAACC,GAAR,CAAYyC,UAAZ,CAAyB,wBAAnC,CAA8D,GAAG,CAAC,KAAlE,CAAwE,KAAK,CAAC,MAA9E,EADJ,cAEI,aAAM,SAAS,CAAC,iBAAhB,sBAFJ,GALJ,cASI,aAAK,SAAS,CAAC,mCAAf,wBACI,YAAK,GAAG,CAAE1C,OAAO,CAACC,GAAR,CAAYyC,UAAZ,CAAyB,uBAAnC,CAA6D,GAAG,CAAC,KAAjE,CAAuE,KAAK,CAAC,MAA7E,EADJ,cAEI,aAAM,SAAS,CAAC,iBAAhB,qBAFJ,GATJ,cAaI,aAAK,SAAS,CAAC,mCAAf,wBACI,YAAK,GAAG,CAAE1C,OAAO,CAACC,GAAR,CAAYyC,UAAZ,CAAyB,wBAAnC,CAA8D,GAAG,CAAC,KAAlE,CAAwE,KAAK,CAAC,MAA9E,EADJ,cAEI,aAAM,SAAS,CAAC,iBAAhB,sBAFJ,GAbJ,GADJ,EADJ,EANJ,cA6BI,eAAQ,SAAS,CAAC,uCAAlB,CAA0D,IAAI,CAAC,QAA/D,uBAAwE,YAAK,GAAG,CAAE1C,OAAO,CAACC,GAAR,CAAYyC,UAAZ,CAAyB,wBAAnC,CAA8D,SAAS,CAAC,WAAxE,CAAoF,GAAG,CAAC,KAAxF,EAAxE,EA7BJ,cA8BI,eAAQ,SAAS,CAAC,6CAAlB,CAAgE,IAAI,CAAC,QAArE,uBAA8E,YAAK,GAAG,CAAE1C,OAAO,CAACC,GAAR,CAAYyC,UAAZ,CAAyB,sBAAnC,CAA4D,SAAS,CAAC,WAAtE,CAAkF,GAAG,CAAC,KAAtF,EAA9E,EA9BJ,GADA,EADA,EADJ,EAzEJ,GADJ,CAkHH,CA5JD,CA6JC,cAAetC,CAAAA,OAAf","sourcesContent":["import axios from 'axios'\r\nimport React,{useState} from 'react'\r\nimport { useParams } from 'react-router-dom'\r\nimport { useSelector, useDispatch } from 'react-redux';\r\nimport { ChatList,NewMessage } from '../../../../../Redux/Actions/chatlist';\r\nimport { GetMessage, SendMessage } from '../../../../../Redux/Actions/message'\r\nimport { GetInfoUser } from '../../../../../Redux/Actions/user'\r\nconst {REACT_APP_API_URL, REACT_APP_API_IMAGE_URL} = process.env\r\n\r\nconst Message = (props) =>{\r\n    let formData = new FormData();\r\n    const [loading, setLoading] = useState(false)\r\n    const dispatch = useDispatch()\r\n    const [data, setData] = useState({\r\n        message : '',\r\n        images : []\r\n    })\r\n    const [updated, setUpdated] = useState(false)\r\n    const { data:user } = useSelector((state)=> state.UserLogin)\r\n    const { data:chat } = useSelector((state) => state.GetMessage)\r\n    const { data:contact } = useSelector((state) => state.GetInfoUser)\r\n    \r\n    React.useEffect(()=>{\r\n        dispatch(GetMessage(user.data.token,props.chatroom,user.data.id_user))\r\n    },[props,updated])\r\n\r\n    React.useEffect(()=>{\r\n        dispatch(GetInfoUser(user.data.token,props.chatroom,user.data.id_user))\r\n    },[props,updated])\r\n\r\n    const newFormData = () =>{\r\n        formData.append('message',data.message);\r\n        for(let i=0; i < data.images.length; i++){\r\n            formData.append('images',data.images[i])\r\n        }\r\n    }\r\n    const onDragOver = (e)=>{\r\n        e.preventDefault()\r\n        alert('kamu drag ini')\r\n    }\r\n    const handler = (event) => {\r\n        event.preventDefault()\r\n        if(data.message != null || data.images.length > 0){\r\n            newFormData()\r\n            dispatch(SendMessage(user.data.token,props.chatroom,user.data.id_user,formData))\r\n            setUpdated(!updated)\r\n            setData({message : '',images : []})\r\n        }else{\r\n            return false\r\n        }\r\n    };\r\n    return(\r\n        <div className=\"head-list bg-white\">\r\n            <div className=\"head-list bg-white\">\r\n                {contact&&\r\n                    contact.map((item)=>(\r\n                    <div className=\"row m-0\">\r\n                    <div className=\"col-3 col-sm-3 col-md-2 col-lg-1 col-xl-1 mt-2 ms-2\">\r\n                        <img src={`${REACT_APP_API_IMAGE_URL}${item.photo}`} className=\"photo\" alt=\"...\" />\r\n                    </div>\r\n                    <div className=\"col-7 col-sm-7 col-md-8 col-lg-9 col-xl-10 mt-3\">\r\n                        <span className=\"fw-bold\">{item.name ?? item.username}</span><br />\r\n                        {(item.isonline == true)?<small className=\"text-purple\">Online</small>:<small className=\"text-muted\">Offline</small>}\r\n                    </div>\r\n                    <div className=\"col-auto col-sm-auto col-md-auto col-lg-auto col-xl-auto mt-4\">\r\n                        <img src={process.env.PUBLIC_URL + '/images/i_profile_menu.svg'}  alt=\"...\" />\r\n                    </div>\r\n                </div>\r\n                ))}\r\n            </div>\r\n            <div className=\"list-message bg-light d-block\">\r\n                <div className=\"list-group p-3\">\r\n                    {chat &&\r\n                        chat.map((element)=>(\r\n                        (element.user1 == user.data.id_user)?\r\n                            (element.name_file != null)?\r\n                                (element.message == null || element.message == '')?\r\n                                    <div>\r\n                                        <div className=\"bg-light d-flex flex-row flex-row-reverse\">\r\n                                            <img src={`${REACT_APP_API_IMAGE_URL}${element.photo}`} className=\"photo-message\"/>\r\n                                            <img src={`${REACT_APP_API_IMAGE_URL}${element.name_file}`} className=\"d-flex align-items-end message-left ms-2\"/>\r\n                                        </div>\r\n                                    </div> \r\n                                :\r\n                                    <div>\r\n                                        <div className=\"bg-light d-flex flex-row flex-row-reverse\" id={element.id} onDrag={(e)=>onDragOver(e)} draggable>\r\n                                            <img src={`${REACT_APP_API_IMAGE_URL}${element.photo}`} className=\"d-flex align-items-end photo-message ms-2\"/>\r\n                                            <img src={`${REACT_APP_API_IMAGE_URL}${element.name_file}`} className=\"d-flex align-items-end message-right ms-2\"/>\r\n                                        </div>\r\n                                        <div className=\"bg-light d-flex flex-row flex-row-reverse\" id={element.id_detail}>\r\n                                            <p className='p-3 mx-5 float-end bg-white message-right text-purple'>{element.message}</p>\r\n                                        </div>\r\n                                    </div>   \r\n                            : \r\n                            <div className=\"bg-light d-flex flex-row flex-row-reverse\">\r\n                                <img src={`${REACT_APP_API_IMAGE_URL}${element.photo}`} className=\"d-flex align-items-end photo-message ms-2\"/>\r\n                                <p className='p-3 float-end bg-white message-right text-purple'>{element.message}</p>\r\n                            </div>\r\n                        : \r\n                            (element.name_file != null)?\r\n                                (element.message != null)?\r\n                                    <div>\r\n                                        <div className=\"bg-light d-flex flex-row\">\r\n                                            <img src={`${REACT_APP_API_IMAGE_URL}${element.photo}`} className=\"photo-message\"/>\r\n                                            <img src={`${REACT_APP_API_IMAGE_URL}${element.name_file}`} className=\"d-flex align-items-end message-left ms-2\"/>\r\n                                        </div>\r\n                                        <div className=\"bg-light bg-light d-flex flex-row\">\r\n                                            <p className='p-3 mx-5 float-start bg-purple message-left text-white'>{element.message}</p>\r\n                                        </div>\r\n                                    </div>\r\n                                :   \r\n                                    <div>\r\n                                        <div className=\"bg-light d-flex flex-row\">\r\n                                            <img src={`${REACT_APP_API_IMAGE_URL}${element.photo}`} className=\"photo-message\"/>\r\n                                            <img src={`${REACT_APP_API_IMAGE_URL}${element.name_file}`} className=\"d-flex align-items-end message-left ms-2\"/>\r\n                                        </div>\r\n                                    </div>\r\n                            :\r\n                            <div className=\"bg-light bg-light d-flex flex-row\">\r\n                                <img src={`${REACT_APP_API_IMAGE_URL}${element.photo}`} className=\"photo-message me-2\"/>\r\n                                <p className='p-3 float-start bg-purple message-left text-white'>{element.message}</p>\r\n                            </div>\r\n                    ))}\r\n                </div>\r\n            </div>\r\n            <div className=\"footer-list bg-white d-block\">\r\n                <div className=\"position-relative input-group px-3\">\r\n                <form encType=\"multipart/form-data\" className=\"form-control search-box \" onSubmit={(e)=>handler(e)}>\r\n                <div className=\"input-group\">\r\n                <input type=\"text\" className=\"form-control search-box icon bg-light \" placeholder=\"Type your message...\" aria-label=\"chat\" aria-describedby=\"basic-addon1\" value={data.message} onChange={(e) => setData({...data, message:e.target.value})}/>\r\n                    <label className=\"search-box input-group-text bg-light\">\r\n                        <input type=\"file\" name=\"picture\" accept=\"image\" multiple onChange={(e) => setData({...data, images:e.target.files})}/>\r\n                        <img src={process.env.PUBLIC_URL + '/images/i_plus.svg'}  className=\"img-fluid\" alt=\"...\" />\r\n                    </label>\r\n                    <div className=\"d-none d-sm-none d-md-block position-absolute col-lg-2 col-md-3 col-sm-4 col-8 g-2 bottom-0 end-0 pb-0 m-5 pe-5\">\r\n                        <div className=\"d-none shadow-sm p-3 bg-purple menu-panel-right align-middle mt-5 me-5\">\r\n                            <div className=\"list-group\">\r\n                                <div className=\"d-flex justify-content-start mb-1\">\r\n                                    <img src={process.env.PUBLIC_URL + '/images/i_image.svg'}  alt=\"...\" width=\"13px\" />\r\n                                    <smal className=\"text-white ms-2\">Image</smal>\r\n                                </div>\r\n                                <div className=\"d-flex justify-content-start mb-1\">\r\n                                    <img src={process.env.PUBLIC_URL + '/images/i_document.svg'}  alt=\"...\" width=\"13px\" />\r\n                                    <smal className=\"text-white ms-2\">Document</smal>\r\n                                </div>\r\n                                <div className=\"d-flex justify-content-start mb-1\">\r\n                                    <img src={process.env.PUBLIC_URL + '/images/i_contact.svg'}  alt=\"...\" width=\"13px\" />\r\n                                    <smal className=\"text-white ms-2\">Contact</smal>\r\n                                </div>\r\n                                <div className=\"d-flex justify-content-start mb-1\">\r\n                                    <img src={process.env.PUBLIC_URL + '/images/i_location.svg'}  alt=\"...\" width=\"13px\" />\r\n                                    <smal className=\"text-white ms-2\">Location</smal>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                   {/*  <button className=\"search-box input-group-text bg-light\" type=\"button\"><img src={process.env.PUBLIC_URL + '/images/i_plus.svg'}  className=\"img-fluid\" alt=\"...\" /></button> */}\r\n                    <button className=\"input-group-text search-box bg-light \" type=\"button\"><img src={process.env.PUBLIC_URL + '/images/i_emoticon.svg'}  className=\"img-fluid\" alt=\"...\" /></button>\r\n                    <button className=\"input-group-text search-box field bg-light \" type=\"button\"><img src={process.env.PUBLIC_URL + '/images/i_camera.svg'}  className=\"img-fluid\" alt=\"...\" /></button>\r\n                </div>\r\n                </form>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    )\r\n}\r\n export default Message"]},"metadata":{},"sourceType":"module"}